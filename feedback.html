<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Care Portal - Feedback</title>

    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        :root {
            --color-primary: #1976D2;
            --color-accent: #00BCD4;
            --color-danger: #D32F2F;
            --color-bg-light: #F8F9FA;
            --color-text-dark: #34495e;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background-color: var(--color-bg-light); display: flex; flex-direction: column; min-height: 100vh; }
        header { background: linear-gradient(135deg, var(--color-primary), #1565C0); color: white; padding: 15px 50px; display: flex; justify-content: space-between; align-items: center; }
        nav a { color: white; text-decoration: none; margin: 0 10px; padding: 10px 15px; }
        .container { display: flex; flex: 1; }
        .sidebar { width: 250px; background: #fff; padding-top: 30px; }
        .sidebar a { display: block; padding: 15px 30px; color: var(--color-text-dark); text-decoration: none; }
        .sidebar a.active { background: var(--color-primary); color: white; }
        .content { flex: 1; padding: 40px; }
        .content-box { background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
        .form-group { margin-bottom: 20px; }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px;
        }
        button { padding: 12px 25px; background: var(--color-accent); color: white; border: none; border-radius: 6px; cursor: pointer; }
        #response-box {
            margin-top: 15px;
            padding: 12px;
            display: none;
            border-radius: 6px;
            font-weight: 600;
        }
        .success { background: #E8F5E9; color: #2E7D32; }
        .error { background: #FFEBEE; color: #D32F2F; }
    </style>
</head>

<body>

   
    <header>
        <h1>City Care Portal</h1>
        <nav>
            <a href="login.html">Login</a>
            <a href="register.html">Register</a>
            <a href="report.html">Report Issue</a>
            <a href="contact.html">Contact</a>
        </nav>
    </header>

    <div class="container">

       
        <div class="sidebar">
            <a href="about.html">About</a>
            <a href="how.html">How it Works</a>
            <a href="faq.html">FAQs</a>
            <a class="active" href="feedback.html">Feedback</a>
        </div>

   
        <div class="content">
            <div class="content-box">
                <h2>Share Your Feedback</h2>
                <p>We appreciate your suggestions. Help us improve the City Care Portal!</p>
                <br>

             
                <form id="feedbackForm">
                    <div class="form-group">
                        <label>Your Name</label>
                        <input type="text" id="name" required>
                    </div>

                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="email" required>
                    </div>

                    <div class="form-group">
                        <label>Feedback Type</label>
                        <select id="type" required>
                            <option value="">-- Select --</option>
                            <option value="Compliment">Compliment</option>
                            <option value="Suggestion">Suggestion</option>
                            <option value="Bug">Bug Report</option>
                            <option value="General">General</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Message</label>
                        <textarea id="message" required></textarea>
                    </div>

                    <button type="submit">Submit Feedback</button>
                </form>

                <div id="response-box"></div>
            </div>
        </div>
    </div>

    <footer style="background:#333;color:white;text-align:center;padding:15px;">
        © 2025 City Care Portal | Designed by Monika & Mrignayani
    </footer>

    
    <script>
        const SUPABASE_URL = "https://gepsqeueluuztzhrrkqf.supabase.co";
        const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdlcHNxZXVlbHV1enR6aHJya3FmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTkzNjksImV4cCI6MjA3ODc5NTM2OX0.GSEJOYLZKa00DQofSeTMjIXsOf2Z7djUGG85XOMqY6A";

        const db = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        const form = document.getElementById("feedbackForm");
        const box = document.getElementById("response-box");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            let name = document.getElementById("name").value.trim();
            let email = document.getElementById("email").value.trim();
            let type = document.getElementById("type").value;
            let message = document.getElementById("message").value.trim();

            box.style.display = "none";

            const { error } = await db.from("feedback").insert({
                name: name,
                email: email,
                type: type,
                message: message
            });

            if (error) {
                box.className = "error";
                box.style.display = "block";
                box.innerText = "❌ Error submitting feedback.";
            } else {
                box.className = "success";
                box.style.display = "block";
                box.innerText = "✅ Feedback submitted successfully!";
                form.reset();
            }
        });
    </script>

</body>
</html>
